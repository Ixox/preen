               
 _______  _______  _______  _______  _       
(  ____ )(  ____ )(  ____ \(  ____ \( (    /|
| (    )|| (    )|| (    \/| (    \/|  \  ( |
| (____)|| (____)|| (__    | (__    |   \ | |
|  _____)|     __)|  __)   |  __)   | (\ \) |
| (      | (\ (   | (      | (      | | \   |
| )      | ) \ \__| (____/\| (____/\| )  \  |
|/       |/   \__/(_______/(_______/|/    )_)
                                            
V0.0 pre alpha
By Xavier Hosxe : xavier dot hosxe {at} gmail dot com
April 18th 2011

-----------------------------------------
Frequency modulation synth for the Maple :
http://leaflabs.com/

Distributed under the terms of the GNU General Public License 
as published by the Free Software Foundation version 3.

-----------------------------------------

Preen Current Features:

. 5 FM algo available... using 3 or 4 oscs per voice
. Up to 5 FM voices 
. Each oscillator has an ADSR envelope
. 4 LFO (saw, square, ramp)
. 8 rows modulation matrix

. Load and save preset to EEPROM.
. Read and send midi
. LCD is updated in realtime showing the parameter you modify.
. The full synth state (19 * 4 parameters) can be edited with the 4 Encoders through the 19 rows.
. The 5 buttons allow easy navigation into the 19 rows (1 engine, 4 osc, 4 env, 6 matrix rows, 4 lfos)
. 2 buttons for midi (save/load patch, select midi channel)...

. Sampling rate : 
  32768 Hz (makes division faster ;-) for audio. 
  1024 Hz for LFO and Modulation Matrix.

. 6th order active low pass bessel filter to get rid (as much as possible) of the aliasing

--------------------------------------------
DONE

Update April 18th
. 8 rows in the Matrix
. 4 midi CC added as matric sources
. MIX osc 1 to 3 added as matrix destination
. Frequency display issue fixed
. MinValue and MaxValue fixed for "char" param type.

2nd Update April 17th
. Feedback added on all ALGOs
. Fixed bug IM2 on ALGO2

Update April 17th
. Feedback added (ALGO1 OSC3 for the moment). 
. Mix added when several last stage osc (ALGO2 and ALGO4)
. Show only parameter relevant to curent algo
. Frequency type (fix / Keyboard) display bug fix.

Update 	April 5th
. Add 3 variations around sinusoid for oscillator (many new sounds possible)
. Add delay during 74hc165 reading to get rid of a HISS noise.
. Hardware wise : validate the PCB.

Update March 27th
. New menu - keyboard velocity sensitivity - number of voice
. Laverage the 11 bit resolution
. Refactor parameters - much easier to add param rows
. Mix1 params ready to be able to mix serveral "final" oscillator
. Fixes env refresh when browsing preset/User banks

Update March 23th
. Refactor menu - much easier to add new menu/submenu
. New midi menu
. Take care of midi channel - redirect to midi out if not the same channel
. Can now load and save to 3 different user banks

Update March 20th
. Read midi CC to change parameters
. Send midi CC when user move encoders

Update March 19th
. Compile against "i2c-wip" libmaple branch
. Add EEPROM Load and Save (24LC512)
. Can edit preset names with 2 encoders
. New 4 ops algo
. Number of voices depenndent of the algo

Update March 13th 2011
. Several types of parameter display : fixed point decimal supported
. Load internal preset can be listen while browsing and cancelled if not really loaded

Update March 8th 2011
. Removed click when all the voices are buisy and a 6th note arrive...
. Remove click when a same note is hit quickly several time.

Update March 6th 2011
. Refactoring :
  Add "EncoderListener" and "separation of concern" between Encoders, FMDisplay, and SynthStatus. 
  Will make Menu maintenance much easier.

Update March 5th 2011
. Dump preset on serialUSB when a button is pressed (to collect them)
. Get rid of the audio ring buffer, i was surprised to note a big improvement in the signal/noise ratio.
. Encoder improvement by calling them more regularly
. Make menu remember the row when go to an other part (E.G from osc to matrix) then back to the first one.

--------------------------------------------

To do before v0.1 (in no order) :
. Add synth param : glide when voice = 1.
. Implement all midi events
. SYSEX pach/bank receive/dump
. increase matrix size and add Control Change as source


Later V1.0 : 
. Assembly for osc and env to catch up with the 5 concurent voices.
. More Algos (4 operators)
. More presets
. Documentation
. a nice PCB and a Box

Later V2.0 : 
. A version 2 with 2 maples (or more) in a chain to take care of more voices.


--------------------------------------------
Hardware (to be detailed)
. LCD LiquidCrystal compatible 4x20 + variable resistance for contrast
. 2 74HC165 to plug buttons and rotary encoders  (I used the DIN schema from midibox.org).
. 4 rotary encodeers + 7 buttons
. condensators and resistor to make the 2nd order Low pass filter.
. 2 chimical condo to remove the constant voltage bias in filter chain
. 1 chip of 4 omp amps (MC32204): 1 for virtual ground + 3 2nd order filter
. Midi Jack + optocoupler 6N138 + diodes
. 24lc512 to save the preset

.... Full schema soon... 

---------------------------------------------

Xavier


